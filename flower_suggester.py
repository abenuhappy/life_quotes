# -*- coding: utf-8 -*-
"""
ìƒë…„ì›”ì¼ ê¸°ë°˜ ì˜¤ëŠ˜ì˜ ê½ƒ ì¶”ì²œ ëª¨ë“ˆ
"""
import hashlib
from datetime import datetime
import pytz
from typing import Dict, Optional

# í•œêµ­ì‹œê°„ëŒ€ ì„¤ì •
KST = pytz.timezone('Asia/Seoul')

def get_kst_now():
    """í•œêµ­ì‹œê°„(KST) ê¸°ì¤€ í˜„ì¬ ì‹œê°„ ë°˜í™˜"""
    return datetime.now(KST)


class FlowerSuggester:
    """ìƒë…„ì›”ì¼ê³¼ ë‚ ì§œ ê¸°ë°˜ ê½ƒ ì¶”ì²œ í´ë˜ìŠ¤"""
    
    # ê³„ì ˆë³„ ê½ƒ
    SEASON_FLOWERS = {
        'ë´„': [
            {'name': 'ë²šê½ƒ', 'emoji': 'ğŸŒ¸', 'meaning': 'ìˆœìˆ˜í•˜ê³  ì•„ë¦„ë‹¤ìš´ ì‚¬ë‘ì„ ìƒì§•í•©ë‹ˆë‹¤. ìƒˆë¡œìš´ ì‹œì‘ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.'},
            {'name': 'íŠ¤ë¦½', 'emoji': 'ğŸŒ·', 'meaning': 'ì™„ë²½í•œ ì‚¬ë‘ê³¼ ëª…ì˜ˆë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ì§„ì •í•œ ì‚¬ë‘ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.'},
            {'name': 'ë¼ë²¤ë”', 'emoji': 'ğŸ’œ', 'meaning': 'í‰ì˜¨ê³¼ ì¹˜ìœ ë¥¼ ìƒì§•í•©ë‹ˆë‹¤. ë§ˆìŒì˜ ì•ˆì •ì„ ê°€ì ¸ë‹¤ì¤ë‹ˆë‹¤.'},
            {'name': 'íˆì•„ì‹ ìŠ¤', 'emoji': 'ğŸŒº', 'meaning': 'ì¸ë‚´ì™€ ëˆê¸°ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ê¾¸ì¤€í•œ ë…¸ë ¥ì´ ê²°ì‹¤ì„ ë§ºì„ ê²ƒì…ë‹ˆë‹¤.'},
            {'name': 'ìˆ˜ì„ í™”', 'emoji': 'ğŸŒ¼', 'meaning': 'ìì¡´ì‹¬ê³¼ ìë¶€ì‹¬ì„ ìƒì§•í•©ë‹ˆë‹¤. ìì‹ ì„ ì‚¬ë‘í•˜ì„¸ìš”.'},
            {'name': 'í”„ë¦¬ì§€ì•„', 'emoji': 'ğŸŒ»', 'meaning': 'ìˆœìˆ˜í•œ ì‚¬ë‘ê³¼ ìš°ì •ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ì†Œì¤‘í•œ ê´€ê³„ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.'},
        ],
        'ì—¬ë¦„': [
            {'name': 'í•´ë°”ë¼ê¸°', 'emoji': 'ğŸŒ»', 'meaning': 'ê¸ì •ê³¼ í¬ë§ì„ ìƒì§•í•©ë‹ˆë‹¤. ë°ì€ ì—ë„ˆì§€ê°€ ë„˜ì¹˜ëŠ” í•˜ë£¨ì…ë‹ˆë‹¤.'},
            {'name': 'ì¥ë¯¸', 'emoji': 'ğŸŒ¹', 'meaning': 'ì‚¬ë‘ê³¼ ì—´ì •ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ê¹Šì€ ê°ì •ì„ ëŠë‚„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.'},
            {'name': 'ë¼ë²¤ë”', 'emoji': 'ğŸ’œ', 'meaning': 'í‰ì˜¨ê³¼ ì¹˜ìœ ë¥¼ ìƒì§•í•©ë‹ˆë‹¤. ë§ˆìŒì˜ ì•ˆì •ì„ ê°€ì ¸ë‹¤ì¤ë‹ˆë‹¤.'},
            {'name': 'í•´ë‹¹í™”', 'emoji': 'ğŸŒº', 'meaning': 'ì•„ë¦„ë‹¤ì›€ê³¼ ìš°ì•„í•¨ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ìì‹ ì˜ ë§¤ë ¥ì„ ë°œíœ˜í•˜ì„¸ìš”.'},
            {'name': 'ìˆ˜êµ­', 'emoji': 'ğŸ’™', 'meaning': 'ì§„ì‹¬ê³¼ ê°ì‚¬í•¨ì„ ìƒì§•í•©ë‹ˆë‹¤. ì£¼ë³€ì— ê°ì‚¬í•˜ëŠ” ë§ˆìŒì„ ê°€ì ¸ë³´ì„¸ìš”.'},
            {'name': 'ë°±í•©', 'emoji': 'ğŸ¤', 'meaning': 'ìˆœìˆ˜ì™€ ê³ ê·€í•¨ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. í’ˆê²© ìˆëŠ” í•˜ë£¨ì…ë‹ˆë‹¤.'},
        ],
        'ê°€ì„': [
            {'name': 'êµ­í™”', 'emoji': 'ğŸŒ¼', 'meaning': 'ì¥ìˆ˜ì™€ ê±´ê°•ì„ ìƒì§•í•©ë‹ˆë‹¤. ì•ˆì •ì ì¸ í•˜ë£¨ë¥¼ ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.'},
            {'name': 'ì½”ìŠ¤ëª¨ìŠ¤', 'emoji': 'ğŸŒº', 'meaning': 'ìˆœìˆ˜í•œ ì‚¬ë‘ê³¼ ì¡°í™”ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ê· í˜• ì¡íŒ í•˜ë£¨ì…ë‹ˆë‹¤.'},
            {'name': 'ë“¤êµ­í™”', 'emoji': 'ğŸŒ¼', 'meaning': 'ì†Œë°•í•¨ê³¼ ì§„ì‹¤í•¨ì„ ìƒì§•í•©ë‹ˆë‹¤. ìì—°ìŠ¤ëŸ¬ìš´ í•˜ë£¨ì…ë‹ˆë‹¤.'},
            {'name': 'ë´‰ì„ í™”', 'emoji': 'ğŸŒº', 'meaning': 'ëˆê¸°ì™€ ì¸ë‚´ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ê¾¸ì¤€í•œ ë…¸ë ¥ì´ í•„ìš”í•©ë‹ˆë‹¤.'},
            {'name': 'ê¸ˆì”í™”', 'emoji': 'ğŸŒ»', 'meaning': 'í¬ë§ê³¼ ê¸ì •ì„ ìƒì§•í•©ë‹ˆë‹¤. ë°ì€ ë¯¸ë˜ë¥¼ ê¸°ëŒ€í•˜ì„¸ìš”.'},
            {'name': 'ê±°ë² ë¼', 'emoji': 'ğŸŒº', 'meaning': 'í–‰ë³µê³¼ ê¸°ì¨ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ì¦ê±°ìš´ í•˜ë£¨ê°€ ë  ê²ƒì…ë‹ˆë‹¤.'},
        ],
        'ê²¨ìš¸': [
            {'name': 'ë™ë°±ê½ƒ', 'emoji': 'ğŸŒº', 'meaning': 'ì§„ì‹¤í•œ ì‚¬ë‘ê³¼ í—Œì‹ ì„ ìƒì§•í•©ë‹ˆë‹¤. ê¹Šì€ ê°ì •ì„ ëŠë‚„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.'},
            {'name': 'ìˆ˜ì„ í™”', 'emoji': 'ğŸŒ¼', 'meaning': 'ìì¡´ì‹¬ê³¼ ìë¶€ì‹¬ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ìì‹ ì„ ì‚¬ë‘í•˜ì„¸ìš”.'},
            {'name': 'í¬ì¸ì„¸í‹°ì•„', 'emoji': 'ğŸŒº', 'meaning': 'ì¶•ë³µê³¼ í–‰ë³µì„ ìƒì§•í•©ë‹ˆë‹¤. ë”°ëœ»í•œ í•˜ë£¨ì…ë‹ˆë‹¤.'},
            {'name': 'í¬ë¦¬ìŠ¤ë§ˆìŠ¤ ë¡œì¦ˆ', 'emoji': 'ğŸŒ¹', 'meaning': 'í¬ë§ê³¼ ìƒˆë¡œìš´ ì‹œì‘ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ë°ì€ ë¯¸ë˜ê°€ ê¸°ë‹¤ë¦½ë‹ˆë‹¤.'},
            {'name': 'ì¹´ë©œë¦¬ì•„', 'emoji': 'ğŸŒº', 'meaning': 'ì™„ë²½í•¨ê³¼ ì´ìƒì„ ìƒì§•í•©ë‹ˆë‹¤. ë†’ì€ ëª©í‘œë¥¼ í–¥í•´ ë‚˜ì•„ê°€ì„¸ìš”.'},
            {'name': 'ê²¨ìš¸ ì¥ë¯¸', 'emoji': 'ğŸŒ¹', 'meaning': 'ì¸ë‚´ì™€ ëˆê¸°ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ì–´ë ¤ì›€ì„ ì´ê²¨ë‚¼ í˜ì´ ìˆìŠµë‹ˆë‹¤.'},
        ],
    }
    
    # ë³„ìë¦¬ë³„ ê½ƒ
    ZODIAC_FLOWERS = {
        'ë¬¼ë³‘ìë¦¬': {'name': 'ë¼ë²¤ë”', 'emoji': 'ğŸ’œ', 'meaning': 'ë…ì°½ì„±ê³¼ ììœ ë¥¼ ìƒì§•í•©ë‹ˆë‹¤. ìì‹ ë§Œì˜ ê¸¸ì„ ê±¸ì–´ê°€ì„¸ìš”.'},
        'ë¬¼ê³ ê¸°ìë¦¬': {'name': 'ìˆ˜ì„ í™”', 'emoji': 'ğŸŒ¼', 'meaning': 'ì§ê´€ê³¼ ê°ì„±ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ë‚´ë©´ì˜ ëª©ì†Œë¦¬ì— ê·€ ê¸°ìš¸ì´ì„¸ìš”.'},
        'ì–‘ìë¦¬': {'name': 'íŠ¤ë¦½', 'emoji': 'ğŸŒ·', 'meaning': 'ì—´ì •ê³¼ ì—ë„ˆì§€ë¥¼ ìƒì§•í•©ë‹ˆë‹¤. í™œê¸°ì°¨ê²Œ í•˜ë£¨ë¥¼ ì‹œì‘í•˜ì„¸ìš”.'},
        'í™©ì†Œìë¦¬': {'name': 'ì¥ë¯¸', 'emoji': 'ğŸŒ¹', 'meaning': 'ì•„ë¦„ë‹¤ì›€ê³¼ ì•ˆì •ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. í’ˆê²© ìˆëŠ” í•˜ë£¨ì…ë‹ˆë‹¤.'},
        'ìŒë‘¥ì´ìë¦¬': {'name': 'ë¼ë²¤ë”', 'emoji': 'ğŸ’œ', 'meaning': 'ì†Œí†µê³¼ ì§€ì‹ì„ ìƒì§•í•©ë‹ˆë‹¤. ìƒˆë¡œìš´ ì •ë³´ë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.'},
        'ê²Œìë¦¬': {'name': 'ë°±í•©', 'emoji': 'ğŸ¤', 'meaning': 'ê°€ì¡±ê³¼ ë³´í˜¸ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ì†Œì¤‘í•œ ì‚¬ëŒë“¤ê³¼ í•¨ê»˜í•˜ì„¸ìš”.'},
        'ì‚¬ììë¦¬': {'name': 'í•´ë°”ë¼ê¸°', 'emoji': 'ğŸŒ»', 'meaning': 'ìì‹ ê°ê³¼ ê¸ì •ì„ ìƒì§•í•©ë‹ˆë‹¤. ë°ì€ ì—ë„ˆì§€ê°€ ë„˜ì¹©ë‹ˆë‹¤.'},
        'ì²˜ë…€ìë¦¬': {'name': 'êµ­í™”', 'emoji': 'ğŸŒ¼', 'meaning': 'ì™„ë²½í•¨ê³¼ ì§ˆì„œë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ì²´ê³„ì ì¸ í•˜ë£¨ì…ë‹ˆë‹¤.'},
        'ì²œì¹­ìë¦¬': {'name': 'ì¥ë¯¸', 'emoji': 'ğŸŒ¹', 'meaning': 'ì¡°í™”ì™€ ì•„ë¦„ë‹¤ì›€ì„ ìƒì§•í•©ë‹ˆë‹¤. ê· í˜• ì¡íŒ í•˜ë£¨ì…ë‹ˆë‹¤.'},
        'ì „ê°ˆìë¦¬': {'name': 'ë™ë°±ê½ƒ', 'emoji': 'ğŸŒº', 'meaning': 'ê°•ë ¬í•œ ê°ì •ê³¼ ë³€í™”ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ê¹Šì€ í†µì°°ì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.'},
        'ì‚¬ìˆ˜ìë¦¬': {'name': 'ì½”ìŠ¤ëª¨ìŠ¤', 'emoji': 'ğŸŒº', 'meaning': 'ììœ ì™€ ëª¨í—˜ì„ ìƒì§•í•©ë‹ˆë‹¤. ìƒˆë¡œìš´ ê²½í—˜ì„ ì¦ê¸°ì„¸ìš”.'},
        'ì—¼ì†Œìë¦¬': {'name': 'ë™ë°±ê½ƒ', 'emoji': 'ğŸŒº', 'meaning': 'ì¸ë‚´ì™€ ì„±ì·¨ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ëª©í‘œë¥¼ í–¥í•´ ê¾¸ì¤€íˆ ë‚˜ì•„ê°€ì„¸ìš”.'},
    }
    
    # íƒ€ë¡œ ì¹´ë“œë³„ ê½ƒ
    TAROT_FLOWERS = {
        'ë§ˆë²•ì‚¬': {'name': 'ë¼ë²¤ë”', 'emoji': 'ğŸ’œ', 'meaning': 'ì°½ì˜ì„±ê³¼ ì˜ì§€ë¥¼ ìƒì§•í•©ë‹ˆë‹¤. ìƒˆë¡œìš´ ì‹œì‘ì„ ì¤€ë¹„í•˜ì„¸ìš”.'},
        'ì—¬êµí™©': {'name': 'ë°±í•©', 'emoji': 'ğŸ¤', 'meaning': 'ì§ê´€ê³¼ ì‹ ë¹„ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ë‚´ë©´ì˜ ì§€í˜œë¥¼ ë¯¿ìœ¼ì„¸ìš”.'},
        'ì—¬í™©ì œ': {'name': 'ì¥ë¯¸', 'emoji': 'ğŸŒ¹', 'meaning': 'í’ìš”ì™€ ì‚¬ë‘ì„ ìƒì§•í•©ë‹ˆë‹¤. í’ì„±í•œ í•˜ë£¨ì…ë‹ˆë‹¤.'},
        'í™©ì œ': {'name': 'ë™ë°±ê½ƒ', 'emoji': 'ğŸŒº', 'meaning': 'ê¶Œìœ„ì™€ ì•ˆì •ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. í™•ê³ í•œ ê¸°ë°˜ì„ ë‹¤ì§€ì„¸ìš”.'},
        'êµí™©': {'name': 'êµ­í™”', 'emoji': 'ğŸŒ¼', 'meaning': 'ì „í†µê³¼ ì§€í˜œë¥¼ ìƒì§•í•©ë‹ˆë‹¤. ê°€ë¥´ì¹¨ì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.'},
        'ì—°ì¸': {'name': 'ì¥ë¯¸', 'emoji': 'ğŸŒ¹', 'meaning': 'ì‚¬ë‘ê³¼ ì„ íƒì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ì¤‘ìš”í•œ ê²°ì •ì„ ë‚´ë¦´ ì‹œê°„ì…ë‹ˆë‹¤.'},
        'ì „ì°¨': {'name': 'í•´ë°”ë¼ê¸°', 'emoji': 'ğŸŒ»', 'meaning': 'ì˜ì§€ì™€ ìŠ¹ë¦¬ë¥¼ ìƒì§•í•©ë‹ˆë‹¤. ëª©í‘œë¥¼ í–¥í•´ ë‚˜ì•„ê°€ì„¸ìš”.'},
        'í˜': {'name': 'íŠ¤ë¦½', 'emoji': 'ğŸŒ·', 'meaning': 'ë‚´ì  í˜ê³¼ ì¸ë‚´ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ì–´ë ¤ì›€ì„ ì´ê²¨ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.'},
        'ì€ë‘”ì': {'name': 'ìˆ˜ì„ í™”', 'emoji': 'ğŸŒ¼', 'meaning': 'ì„±ì°°ê³¼ ë‚´ë©´ íƒêµ¬ë¥¼ ìƒì§•í•©ë‹ˆë‹¤. ê¹Šì´ ìƒê°í•´ë³¼ ì‹œê°„ì…ë‹ˆë‹¤.'},
        'ìš´ëª…ì˜ ë°”í€´': {'name': 'ì½”ìŠ¤ëª¨ìŠ¤', 'emoji': 'ğŸŒº', 'meaning': 'ë³€í™”ì™€ ìˆœí™˜ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ìƒˆë¡œìš´ êµ­ë©´ì´ ì‹œì‘ë©ë‹ˆë‹¤.'},
        'ì •ì˜': {'name': 'ë°±í•©', 'emoji': 'ğŸ¤', 'meaning': 'ê³µì •í•¨ê³¼ ê· í˜•ì„ ìƒì§•í•©ë‹ˆë‹¤. ì˜¬ë°”ë¥¸ íŒë‹¨ì„ ë‚´ë¦¬ì„¸ìš”.'},
        'ë§¤ë‹¬ë¦° ì‚¬ëŒ': {'name': 'ë¼ë²¤ë”', 'emoji': 'ğŸ’œ', 'meaning': 'í¬ìƒê³¼ ê¹¨ë‹¬ìŒì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ìƒˆë¡œìš´ ê´€ì ì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.'},
        'ì£½ìŒ': {'name': 'ë™ë°±ê½ƒ', 'emoji': 'ğŸŒº', 'meaning': 'ë³€í™”ì™€ ì¬ìƒì„ ìƒì§•í•©ë‹ˆë‹¤. ëì€ ìƒˆë¡œìš´ ì‹œì‘ì…ë‹ˆë‹¤.'},
        'ì ˆì œ': {'name': 'ìˆ˜êµ­', 'emoji': 'ğŸ’™', 'meaning': 'ê· í˜•ê³¼ ì¡°í™”ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ì¤‘ìš©ì˜ ì§€í˜œë¥¼ ì‹¤ì²œí•˜ì„¸ìš”.'},
        'ì•…ë§ˆ': {'name': 'ì¥ë¯¸', 'emoji': 'ğŸŒ¹', 'meaning': 'ìœ í˜¹ê³¼ ì†ë°•ì„ ìƒì§•í•©ë‹ˆë‹¤. ììœ ë¥¼ ì°¾ì•„ì•¼ í•©ë‹ˆë‹¤.'},
        'íƒ‘': {'name': 'íŠ¤ë¦½', 'emoji': 'ğŸŒ·', 'meaning': 'ë³€í™”ì™€ í•´ë°©ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ê¸‰ê²©í•œ ë³€í™”ê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.'},
        'ë³„': {'name': 'í•´ë°”ë¼ê¸°', 'emoji': 'ğŸŒ»', 'meaning': 'í¬ë§ê³¼ ì˜ê°ì„ ìƒì§•í•©ë‹ˆë‹¤. ë°ì€ ë¯¸ë˜ê°€ ê¸°ë‹¤ë¦½ë‹ˆë‹¤.'},
        'ë‹¬': {'name': 'ë¼ë²¤ë”', 'emoji': 'ğŸ’œ', 'meaning': 'ì§ê´€ê³¼ í™˜ìƒì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ë‚´ë©´ì˜ ëª©ì†Œë¦¬ì— ê·€ ê¸°ìš¸ì´ì„¸ìš”.'},
        'íƒœì–‘': {'name': 'í•´ë°”ë¼ê¸°', 'emoji': 'ğŸŒ»', 'meaning': 'í–‰ë³µê³¼ ì„±ê³µì„ ìƒì§•í•©ë‹ˆë‹¤. ë°ê³  ê¸ì •ì ì¸ í•˜ë£¨ì…ë‹ˆë‹¤.'},
        'ì‹¬íŒ': {'name': 'ë°±í•©', 'emoji': 'ğŸ¤', 'meaning': 'ì¬ìƒê³¼ ê¹¨ë‹¬ìŒì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ìƒˆë¡œìš´ ì‹œì‘ì„ ì¤€ë¹„í•˜ì„¸ìš”.'},
        'ì„¸ê³„': {'name': 'ì½”ìŠ¤ëª¨ìŠ¤', 'emoji': 'ğŸŒº', 'meaning': 'ì™„ì„±ê³¼ ì„±ì·¨ë¥¼ ìƒì§•í•©ë‹ˆë‹¤. ëª©í‘œë¥¼ ë‹¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.'},
        'ë°”ë³´': {'name': 'ìˆ˜ì„ í™”', 'emoji': 'ğŸŒ¼', 'meaning': 'ìƒˆë¡œìš´ ì‹œì‘ê³¼ ëª¨í—˜ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ë‘ë ¤ì›€ ì—†ì´ ë„ì „í•˜ì„¸ìš”.'},
    }
    
    def __init__(self):
        pass
    
    def suggest_flower(self, birth_date: str, date_str: Optional[str] = None) -> Dict:
        """
        ìƒë…„ì›”ì¼ê³¼ ë‚ ì§œ ê¸°ë°˜ìœ¼ë¡œ ì˜¤ëŠ˜ì˜ ê½ƒ ì¶”ì²œ
        
        Args:
            birth_date: ìƒë…„ì›”ì¼ (YYYY-MM-DD)
            date_str: ë‚ ì§œ (YYYY-MM-DD), Noneì´ë©´ ì˜¤ëŠ˜ ë‚ ì§œ
        
        Returns:
            ê½ƒ ì •ë³´ ë”•ì…”ë„ˆë¦¬
        """
        if date_str is None:
            date_str = get_kst_now().strftime('%Y-%m-%d')
        
        # ë‚ ì§œì™€ ìƒë…„ì›”ì¼ì„ ì¡°í•©í•˜ì—¬ ì‹œë“œ ìƒì„±
        seed_str = f"{date_str}_{birth_date}_flower"
        seed_hash = int(hashlib.md5(seed_str.encode()).hexdigest(), 16)
        
        # ìƒë…„ì›”ì¼ì—ì„œ ì •ë³´ ì¶”ì¶œ
        birth_dt = datetime.strptime(birth_date, '%Y-%m-%d')
        month = birth_dt.month
        day = birth_dt.day
        
        # ê³„ì ˆ ê²°ì •
        if month in [12, 1, 2]:
            season = 'ê²¨ìš¸'
        elif month in [3, 4, 5]:
            season = 'ë´„'
        elif month in [6, 7, 8]:
            season = 'ì—¬ë¦„'
        else:
            season = 'ê°€ì„'
        
        # ë³„ìë¦¬ ê²°ì •
        zodiac_korean = self._get_zodiac_from_month_day(month, day)
        
        # íƒ€ë¡œ ì¹´ë“œ ê²°ì • (ìƒì¼ ìˆ«ì ê¸°ë°˜)
        tarot_number = ((month + day) % 22) or 22
        tarot_name = self._get_tarot_name(tarot_number)
        
        # ê½ƒ ì„ íƒ ì†ŒìŠ¤ ê²°ì • (ì‹œë“œ ê¸°ë°˜)
        source_type = seed_hash % 3  # 0: ë³„ìë¦¬, 1: ê³„ì ˆ, 2: íƒ€ë¡œ
        
        if source_type == 0 and zodiac_korean in self.ZODIAC_FLOWERS:
            # ë³„ìë¦¬ ê½ƒ
            flower = self.ZODIAC_FLOWERS[zodiac_korean].copy()
            flower['source'] = f'{zodiac_korean}ì˜ ê½ƒ'
        elif source_type == 1:
            # ê³„ì ˆ ê½ƒ
            season_flowers = self.SEASON_FLOWERS.get(season, self.SEASON_FLOWERS['ë´„'])
            flower_idx = seed_hash % len(season_flowers)
            flower = season_flowers[flower_idx].copy()
            flower['source'] = f'{season} ê³„ì ˆì˜ ê½ƒ'
        else:
            # íƒ€ë¡œ ê½ƒ
            if tarot_name in self.TAROT_FLOWERS:
                flower = self.TAROT_FLOWERS[tarot_name].copy()
                flower['source'] = f'{tarot_name} ì¹´ë“œì˜ ê½ƒ'
            else:
                # ê¸°ë³¸ ê½ƒ
                flower = {'name': 'í•´ë°”ë¼ê¸°', 'emoji': 'ğŸŒ»', 'meaning': 'ê¸ì •ê³¼ í¬ë§ì„ ìƒì§•í•©ë‹ˆë‹¤. ë°ì€ í•˜ë£¨ì…ë‹ˆë‹¤.', 'source': 'ê¸°ë³¸ ê½ƒ'}
        
        # ì¶”ê°€ ì •ë³´
        flower['date'] = date_str
        flower['birth_date'] = birth_date
        
        return flower
    
    def _get_zodiac_from_month_day(self, month: int, day: int) -> str:
        """ì›”ê³¼ ì¼ë¡œ ë³„ìë¦¬ ê²°ì •"""
        if (month == 1 and day >= 20) or (month == 2 and day < 19):
            return 'ë¬¼ë³‘ìë¦¬'
        elif (month == 2 and day >= 19) or (month == 3 and day < 21):
            return 'ë¬¼ê³ ê¸°ìë¦¬'
        elif (month == 3 and day >= 21) or (month == 4 and day < 20):
            return 'ì–‘ìë¦¬'
        elif (month == 4 and day >= 20) or (month == 5 and day < 21):
            return 'í™©ì†Œìë¦¬'
        elif (month == 5 and day >= 21) or (month == 6 and day < 21):
            return 'ìŒë‘¥ì´ìë¦¬'
        elif (month == 6 and day >= 21) or (month == 7 and day < 23):
            return 'ê²Œìë¦¬'
        elif (month == 7 and day >= 23) or (month == 8 and day < 23):
            return 'ì‚¬ììë¦¬'
        elif (month == 8 and day >= 23) or (month == 9 and day < 23):
            return 'ì²˜ë…€ìë¦¬'
        elif (month == 9 and day >= 23) or (month == 10 and day < 23):
            return 'ì²œì¹­ìë¦¬'
        elif (month == 10 and day >= 23) or (month == 11 and day < 22):
            return 'ì „ê°ˆìë¦¬'
        elif (month == 11 and day >= 22) or (month == 12 and day < 22):
            return 'ì‚¬ìˆ˜ìë¦¬'
        else:
            return 'ì—¼ì†Œìë¦¬'
    
    def _get_tarot_name(self, number: int) -> str:
        """íƒ€ë¡œ ì¹´ë“œ ë²ˆí˜¸ë¡œ ì´ë¦„ ë°˜í™˜"""
        tarot_names = [
            'ë§ˆë²•ì‚¬', 'ì—¬êµí™©', 'ì—¬í™©ì œ', 'í™©ì œ', 'êµí™©', 'ì—°ì¸', 'ì „ì°¨', 'í˜', 'ì€ë‘”ì',
            'ìš´ëª…ì˜ ë°”í€´', 'ì •ì˜', 'ë§¤ë‹¬ë¦° ì‚¬ëŒ', 'ì£½ìŒ', 'ì ˆì œ', 'ì•…ë§ˆ', 'íƒ‘', 'ë³„', 'ë‹¬',
            'íƒœì–‘', 'ì‹¬íŒ', 'ì„¸ê³„', 'ë°”ë³´'
        ]
        return tarot_names[number - 1] if 1 <= number <= 22 else 'ë°”ë³´'


if __name__ == '__main__':
    # í…ŒìŠ¤íŠ¸
    suggester = FlowerSuggester()
    flower = suggester.suggest_flower('1990-05-15')
    import json
    print(json.dumps(flower, ensure_ascii=False, indent=2))

